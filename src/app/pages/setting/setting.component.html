

<div class="spinner data-load" *ngIf="load==true">
    <div style="position: absolute; top:50%;left:50%;">
    <div  class="spinner-border text-primary "  role="status">
        
      </div>
    <span style="display: block; color:blue;">Yükleniyor...</span></div>
  </div>


<div class="container ">
    <div class="row justify-content-center">
        <div class="col-12 col-lg-10 col-xl-8 mx-auto">
            <h1 class="h3 my-4 neuTitle d-flex justify-content-center page-title">Ayarlar</h1>

            <div class="btn-group my-5 d-flex justify-content-center"  role="group" aria-label="Basic example">
                <a (click)="onClick('updateProfile')" type="button" class="btn btn-outline-success px-5 py-2">Profili Güncelle</a>
                <a (click)="onClick('updateTarget')" type="button" class="btn btn-outline-success px-5 py-2">Hedefleri Güncelle</a>
                <a (click)="onClick('updatePassword')" type="button" class="btn btn-outline-success px-5 py-2">Şifre Değiştir</a>
                
              </div>

                <form id="updateProfile" [formGroup]="userUpdateForm">
                    <div class="row mt-5 align-items-center d-flex justify-content-center">
                        <div class="col-md-3 text-center mb-5">
                            <div class="avatar avatar-xl">
                                <label for="img" class="img"></label>
                                <input id="img" type="file" formControlName="profile_picture_url" (change)="getImg($event)" [(ngModel)]="selectedImg" accept=".jpg,.png" hidden>
                             
                            </div>
                        </div>
                       
                    </div>
                    <h1>Profil Güncelle</h1>
                    <hr class="my-2" />
                    <div class="row">
                        <div class="form-floating col-6 mb-3">
                            <input type="text" id="firstname" formControlName="name" value="{{user.name}}" class="form-control" placeholder="Brown" />
                            <label for="firstname">Ad Soyad</label>
                        </div>
                        <div class="form-floating col-6 mb-3">
                            <input type="text" id="lastname"  formControlName="username"  value="{{user.username}}" class="form-control" placeholder="Asher" />
                            <label for="lastname">Kullanıcı Adı</label>
                        </div>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="email" class="form-control" formControlName="email"  value="{{user.email}}" id="inputEmail4" placeholder="brown@asher.me" />
                        <label for="inputEmail4">Email</label>
                        
                    </div>
                    <select class="form-select mb-3" formControlName="education_class" aria-label="Default select example">
                        <option selected>Sınıf Seçiniz</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">Mezun</option>
                      
                      </select>

                      <div class="form-floating mb-3">
                        <input type="password" class="form-control" formControlName="password" id="password" placeholder="brown@asher.me" />
                        <label for="password">Şifre</label> 
                      </div>

                    
                      <div class="d-flex justify-content-end">
                        <button type="submit" (click)="update()" class="btn btn-primary">Güncelle</button>
                      </div>
                </form>
                <form id="updateTarget" [formGroup]="targetUpdateForm">
                    <h1>Hedef Güncelle</h1>
                    <hr class="my-4" />

                    <input type="text" style="opacity: 0;" formControlName="_id" class="form-control" value="{{target._id}}" id="section"  />
                    

                    <div class="row">
                        <div class="col-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" formControlName="section" value="{{target.section}}" id="section"  />
                                <label for="section">Bölüm</label>
                                
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" formControlName="target_department" value="{{target.target_department}}" id="targetDepartmant" />
                                <label for="targetDepartmant">Hedef Bölüm</label>
                                
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" formControlName="target_university" value="{{target.target_university}}" id="targetUniversity" />
                                <label for="targetUniversity">Hedef Üniversite</label>
                                
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" formControlName="target_point" value="{{target.target_point}}" id="targetPoint" />
                                <label for="targetPoint">Hedef Puan</label>
                                
                            </div>
                        </div>
                    </div>
                    <div *ngIf="control==false" class="d-flex justify-content-end">
                        <button type="submit" (click)="createTarget()" class="btn btn-primary">Oluştur</button>
                    </div>

                <div *ngIf="control==true" class="d-flex justify-content-end">
                    <button type="submit" (click)="updateTarget()" class="btn btn-primary">Güncelle</button>
                </div>
                </form>

                <form id="updatePassword" [formGroup]="updatePasswordForm">
                    <h1>Şifre Değiştir</h1>
                    <hr class="my-4" />
                    <div class="row mb-4">
                        
                        <div class="form-floating mb-3">
                            <input type="password" class="form-control" formControlName="oldPassword" id="oldPassword" placeholder="name@example.com">
                            <label for="oldPassword">Eski Şifre</label>
                          </div>
                         
                            <div class="form-floating form-group mb-3">
                                <input type="password" class="form-control" formControlName="newPassword" id="newPassword" placeholder="name@example.com" >
                                <label for="newPassword">Yeni Şifre</label>
                            </div>
                            <div class="form-floating form-group mb-3">
                                <input type="password" formControlName="verifyNewPassword" class="form-control" id="verifyNewPassword" placeholder="name@example.com">
                                <label for="verifyNewPassword">Yeni Şifre Tekrar</label>
                            </div>
                        
        
                    </div>
                    <div class="d-flex justify-content-end">
                        <button type="submit" (click)="updatePassword()" class="btn btn-primary">Güncelle</button>
                    </div>
                </form>
            
        </div>
    </div>
    
    </div>